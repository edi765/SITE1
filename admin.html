<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Panou Administrare – GetASubscription</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>tailwind.config={theme:{extend:{colors:{gold1:'#a67c00',gold2:'#bf9b30',gold3:'#ffbf00',gold4:'#ffcf40',gold5:'#ffdc73'},boxShadow:{'gold-glow':'0 0 20px rgba(191,155,48,0.45), inset 0 0 12px rgba(255,207,64,0.35)'},backgroundImage:{'gold-gradient':'linear-gradient(135deg,#a67c00 0%,#bf9b30 25%,#ffbf00 50%,#ffcf40 75%,#ffdc73 100%)'}}}}</script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
    :root{color-scheme:dark}
    .light-mode{color-scheme:light}
    body{transition:background .3s ease,color .3s ease}
    header{background:rgba(0,0,0,0.4);border-bottom:1px solid rgba(191,155,48,.2);transition:background .3s ease,border-color .3s ease}
    .theme-toggle{width:36px;height:36px;border-radius:9999px;border:1px solid rgba(191,155,48,.45);background:rgba(255,255,255,0.06);color:#facc15;display:inline-flex;align-items:center;justify-content:center;transition:transform .2s ease,box-shadow .2s ease,background .2s ease,color .2s ease}
    .theme-toggle:hover{transform:translateY(-1px);box-shadow:0 0 12px rgba(191,155,48,.3)}
    .theme-toggle i{font-size:.95rem}
    .theme-toggle .icon-moon{display:none}
    body{background:#000;color:#e7e7e7;font-family:'Montserrat','Poppins',system-ui}
    .btn-gold{background-image:linear-gradient(135deg,#a67c00,#bf9b30 25%,#ffbf00 50%,#ffcf40 75%,#ffdc73);color:#111;box-shadow:0 0 0 1px rgba(255,207,64,.35) inset,0 8px 24px rgba(255,191,0,.25);transition:transform .2s,box-shadow .2s}
    .btn-gold:hover{transform:translateY(-2px);box-shadow:0 0 0 1px rgba(255,220,115,.55) inset,0 12px 32px rgba(255,207,64,.35)}
    .border-gold{border:1px solid rgba(191,155,48,.35);box-shadow:inset 0 0 12px rgba(191,155,48,.15),0 0 24px rgba(191,155,48,.12)}
    .text-gold-gradient{background:linear-gradient(135deg,#a67c00,#ffbf00,#ffdc73);-webkit-background-clip:text;background-clip:text;color:transparent}
    .hero-banner{position:relative;overflow:hidden;background:#050505;}
    .hero-banner::before{content:"";position:absolute;inset:-35%;background:radial-gradient(circle at 25% 20%,rgba(191,155,48,.25),transparent 55%),radial-gradient(circle at 75% 30%,rgba(106,13,173,.22),transparent 55%);animation:heroGradientAdmin 18s ease-in-out infinite alternate;pointer-events:none;}
    .hero-banner>.hero-content{position:relative;z-index:1;}
    @keyframes heroGradientAdmin{to{transform:translate3d(-6%,6%,0) scale(1.08);}}
    .light-mode body{background:#f6f5f0;color:#1f1f1f}
    .light-mode header{background:rgba(255,255,255,0.85);border-bottom:1px solid rgba(191,155,48,.3)}
    .light-mode .border-gold{box-shadow:inset 0 0 12px rgba(191,155,48,.08),0 0 18px rgba(191,155,48,.1)}
    .light-mode .bg-black{background:#ffffff!important}
    .light-mode .bg-black\/40{background:rgba(255,255,255,0.85)!important;color:#1f1f1f!important}
    .light-mode .bg-black\/60{background:rgba(255,255,255,0.9)!important;color:#1f1f1f!important}
    .light-mode .hero-banner{background:#faf7ef}
    .light-mode .hero-banner::before{background:radial-gradient(circle at 25% 20%,rgba(255,210,150,.35),transparent 55%),radial-gradient(circle at 75% 30%,rgba(180,150,255,.3),transparent 55%)}
    .light-mode .text-zinc-300{color:#394150!important}
    .light-mode .text-zinc-400{color:#4b5563!important}
    .light-mode [class*="border-yellow-600/20"]{border-color:rgba(191,155,48,0.28)!important}
    .light-mode .theme-toggle{background:rgba(255,255,255,0.95);color:#7c5800;border-color:rgba(191,155,48,.45)}
    .light-mode .theme-toggle .icon-sun{display:none}
    .light-mode .theme-toggle .icon-moon{display:inline-block}
  </style>
</head>
<body>
  <header class="fixed top-0 inset-x-0 z-50 backdrop-blur bg-black/40 border-b border-yellow-600/20">
    <div class="max-w-7xl mx-auto px-4 md:px-6 lg:px-8 h-16 flex items-center justify-between">
      <a href="index.html" class="flex items-center gap-3"><div class="w-8 h-8 rounded-full bg-gold-gradient"></div><span class="text-xl font-semibold tracking-widest bg-gold-gradient bg-clip-text text-transparent">GetASubscription Admin</span></a>
      <div class="flex items-center gap-4">
        <button id="themeToggle" type="button" class="theme-toggle" aria-label="Comută modul luminos">
          <i class="fa-solid fa-sun icon-sun"></i>
          <i class="fa-solid fa-moon icon-moon"></i>
        </button>
        <span class="text-sm text-zinc-400">Panou Administrare</span>
        <a href="index.html" class="text-sm text-gold4 hover:underline">Înapoi la site</a>
      </div>
    </div>
  </header>

  <main class="pt-24 pb-20">
    <div class="max-w-7xl mx-auto px-4 md:px-6 lg:px-8">
      <section class="hero-banner rounded-2xl border border-yellow-600/20 mb-10">
        <div class="hero-content p-8 md:p-10">
          <h1 class="text-4xl md:text-5xl font-bold text-gold-gradient mb-2">Panou Administrare</h1>
          <p class="text-zinc-300 max-w-2xl">Gestionează abonamente, clienți, leaduri și setări</p>
        </div>
      </section>

      <!-- Stats Overview -->
      <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
        <div class="border-gold rounded-xl p-6">
          <div class="flex items-center justify-between mb-2">
            <span class="text-zinc-400 text-sm">Total clienți</span>
            <i class="fa-solid fa-users text-gold4 text-xl"></i>
          </div>
          <div class="text-3xl font-bold text-gold4" id="totalClients">0</div>
        </div>
        <div class="border-gold rounded-xl p-6">
          <div class="flex items-center justify-between mb-2">
            <span class="text-zinc-400 text-sm">Abonamente active</span>
            <i class="fa-solid fa-box text-gold4 text-xl"></i>
          </div>
          <div class="text-3xl font-bold text-gold4" id="totalSubscriptions">0</div>
        </div>
        <div class="border-gold rounded-xl p-6">
          <div class="flex items-center justify-between mb-2">
            <span class="text-zinc-400 text-sm">Leaduri noi</span>
            <i class="fa-solid fa-envelope text-gold4 text-xl"></i>
          </div>
          <div class="text-3xl font-bold text-gold4" id="totalLeads">0</div>
        </div>
        <div class="border-gold rounded-xl p-6">
          <div class="flex items-center justify-between mb-2">
            <span class="text-zinc-400 text-sm">Venituri lunare</span>
            <i class="fa-solid fa-dollar-sign text-gold4 text-xl"></i>
          </div>
          <div class="text-3xl font-bold text-gold4" id="monthlyRevenue">$0</div>
        </div>
      </div>

      <!-- Tabs -->
      <div class="border-gold rounded-xl overflow-hidden mb-6">
        <div class="flex border-b border-yellow-600/20 overflow-x-auto">
          <button class="tab-btn active px-6 py-4 font-semibold text-gold4 border-b-2 border-gold4 whitespace-nowrap" data-tab="subscriptions">Abonamente</button>
          <button class="tab-btn px-6 py-4 font-semibold text-zinc-400 hover:text-gold4 transition whitespace-nowrap" data-tab="clients">Clienți</button>
          <button class="tab-btn px-6 py-4 font-semibold text-zinc-400 hover:text-gold4 transition whitespace-nowrap" data-tab="leads">Leaduri</button>
          <button class="tab-btn px-6 py-4 font-semibold text-zinc-400 hover:text-gold4 transition whitespace-nowrap" data-tab="affiliates">Afiliați</button>
          <button class="tab-btn px-6 py-4 font-semibold text-zinc-400 hover:text-gold4 transition whitespace-nowrap" data-tab="settings">Setări</button>
        </div>

        <!-- Tab: Abonamente -->
        <div id="tab-subscriptions" class="tab-content p-6">
          <div class="flex items-center justify-between mb-4">
            <h2 class="text-2xl font-semibold">Gestionare abonamente</h2>
            <button class="btn-gold px-4 py-2 rounded-md text-sm font-semibold" onclick="openAddSubscriptionModal()">
              <i class="fa-solid fa-plus mr-2"></i>Adaugă abonament
            </button>
          </div>
          <div id="subscriptionsList" class="space-y-4">
            <!-- Abonamentele vor fi populate dinamic -->
          </div>
        </div>

        <!-- Tab: Clienți -->
        <div id="tab-clients" class="tab-content p-6 hidden">
          <h2 class="text-2xl font-semibold mb-4">Lista clienți</h2>
          <div class="mb-4">
            <input type="text" id="searchClients" placeholder="Caută clienți..." class="w-full border-gold bg-black/60 rounded-md px-4 py-3 focus:outline-none focus:ring-2 focus:ring-gold4">
          </div>
          <div id="clientsList" class="space-y-4">
            <!-- Clienții vor fi populați dinamic -->
          </div>
        </div>

        <!-- Tab: Leaduri -->
        <div id="tab-leads" class="tab-content p-6 hidden">
          <h2 class="text-2xl font-semibold mb-4">Leaduri (Investitori & Afiliați)</h2>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="border-gold rounded-xl p-6">
              <h3 class="text-xl font-semibold mb-4 text-gold4">Investitori</h3>
              <div id="investorLeads" class="space-y-3">
                <!-- Leaduri investitori -->
              </div>
            </div>
            <div class="border-gold rounded-xl p-6">
              <h3 class="text-xl font-semibold mb-4 text-gold4">Afiliați</h3>
              <div id="affiliateLeads" class="space-y-3">
                <!-- Leaduri afiliați -->
              </div>
            </div>
          </div>
        </div>

        <!-- Tab: Afiliați -->
        <div id="tab-affiliates" class="tab-content p-6 hidden">
          <h2 class="text-2xl font-semibold mb-4">Gestionare afiliați</h2>
          <div id="affiliatesList" class="space-y-4">
            <!-- Lista afiliați -->
          </div>
        </div>

        <!-- Tab: Setări -->
        <div id="tab-settings" class="tab-content p-6 hidden">
          <h2 class="text-2xl font-semibold mb-4">Setări sistem</h2>
          <div class="space-y-6">
            <div class="border-gold rounded-xl p-6">
              <h3 class="text-xl font-semibold mb-4">Gestionare tieruri</h3>
              <p class="text-zinc-300 mb-4">Editează prețurile și tierurile pentru fiecare categorie de abonament.</p>
              <button class="btn-gold px-4 py-2 rounded-md text-sm font-semibold">Editează tieruri</button>
            </div>
            <div class="border-gold rounded-xl p-6">
              <h3 class="text-xl font-semibold mb-4">Costuri suplimentare</h3>
              <p class="text-zinc-300 mb-4">Gestionează costurile pentru teme, ambalare și transport.</p>
              <button class="btn-gold px-4 py-2 rounded-md text-sm font-semibold">Editează costuri</button>
            </div>
            <div class="border-gold rounded-xl p-6">
              <h3 class="text-xl font-semibold mb-4">Integrare plăți</h3>
              <p class="text-zinc-300 mb-4">Configurează Stripe, PayU sau alte procesatoare de plăți.</p>
              <button class="btn-gold px-4 py-2 rounded-md text-sm font-semibold">Configurează plăți</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <script>
    const root=document.documentElement;
    const themeToggle=document.getElementById('themeToggle');
    const storedTheme=localStorage.getItem('themePreference');
    if(storedTheme==='light'){root.classList.add('light-mode');}
    updateThemeAria();
    if(themeToggle){themeToggle.addEventListener('click',()=>{root.classList.toggle('light-mode');const isLight=root.classList.contains('light-mode');localStorage.setItem('themePreference',isLight?'light':'dark');updateThemeAria();});}
    function updateThemeAria(){if(!themeToggle)return;const isLight=root.classList.contains('light-mode');themeToggle.setAttribute('aria-label',isLight?'Comută modul întunecat':'Comută modul luminos');}

    // Load admin data
    function loadAdminData() {
      // Load all users
      const users = JSON.parse(localStorage.getItem('users') || '[]');
      const subscriptions = JSON.parse(localStorage.getItem('userSubscriptions') || '[]');
      const investorLeads = JSON.parse(localStorage.getItem('investorLeads') || '[]');
      const affiliateLeads = JSON.parse(localStorage.getItem('affiliateLeads') || '[]');
      
      // Update stats
      document.getElementById('totalClients').textContent = users.length;
      document.getElementById('totalSubscriptions').textContent = subscriptions.filter(s => s.status === 'active').length;
      document.getElementById('totalLeads').textContent = investorLeads.length + affiliateLeads.length;
      const monthlyRevenue = subscriptions.filter(s => s.status === 'active').reduce((sum, s) => sum + (parseFloat(s.total?.replace('$', '') || s.tier || 0)), 0);
      document.getElementById('monthlyRevenue').textContent = '$' + monthlyRevenue.toFixed(2);
      
      // Load subscriptions
      loadSubscriptions(subscriptions);
      loadClients(users);
      loadInvestorLeads(investorLeads);
      loadAffiliateLeads(affiliateLeads);
    }

    // Load subscriptions
    function loadSubscriptions(subscriptions) {
      const container = document.getElementById('subscriptionsList');
      container.innerHTML = subscriptions.map(sub => `
        <div class="border-gold rounded-xl p-6">
          <div class="flex items-start justify-between mb-4">
            <div>
              <h3 class="text-xl font-semibold mb-1">${sub.name}</h3>
              <p class="text-sm text-zinc-400">${sub.email} | ${sub.phone}</p>
            </div>
            <span class="px-3 py-1 rounded-full text-xs font-semibold ${sub.status === 'active' ? 'bg-green-500/20 text-green-400' : 'bg-red-500/20 text-red-400'}">${sub.status === 'active' ? 'Activ' : 'Inactiv'}</span>
          </div>
          <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm mb-4">
            <div>
              <span class="text-zinc-400">Tier:</span>
              <div class="font-semibold text-gold4">$${sub.tier}</div>
            </div>
            <div>
              <span class="text-zinc-400">Total:</span>
              <div class="font-semibold">${sub.total}</div>
            </div>
            <div>
              <span class="text-zinc-400">Data activare:</span>
              <div class="font-semibold">${new Date(sub.nextPayment || Date.now()).toLocaleDateString('ro-RO')}</div>
            </div>
            <div>
              <span class="text-zinc-400">Status:</span>
              <div class="font-semibold">${sub.status}</div>
            </div>
          </div>
          <div class="flex gap-3">
            <button class="edit-subscription btn-gold px-4 py-2 rounded-md text-sm font-semibold" data-id="${sub.id}">Editează</button>
            <button class="suspend-subscription px-4 py-2 rounded-md text-sm font-semibold border-gold hover:shadow-gold-glow transition" data-id="${sub.id}">Suspendă</button>
          </div>
        </div>
      `).join('');
    }

    // Load clients
    function loadClients(clients) {
      const container = document.getElementById('clientsList');
      container.innerHTML = clients.map(client => `
        <div class="border-gold rounded-xl p-6">
          <div class="flex items-center justify-between">
            <div>
              <h3 class="text-lg font-semibold">${client.name}</h3>
              <p class="text-sm text-zinc-400">${client.email}</p>
            </div>
            <a href="dashboard.html?user=${client.email}" class="btn-gold px-4 py-2 rounded-md text-sm font-semibold">Vezi profil</a>
          </div>
        </div>
      `).join('');
    }

    // Load investor leads
    function loadInvestorLeads(leads) {
      const container = document.getElementById('investorLeads');
      if (leads.length === 0) {
        container.innerHTML = '<p class="text-zinc-400">Nu există leaduri investitori.</p>';
        return;
      }
      container.innerHTML = leads.map(lead => `
        <div class="border-gold rounded-lg p-4">
          <p class="font-semibold">${lead.name}</p>
          <p class="text-sm text-zinc-400">${lead.email}</p>
          <p class="text-sm text-zinc-300 mt-2">Capital: €${lead.capital}</p>
        </div>
      `).join('');
    }

    // Load affiliate leads
    function loadAffiliateLeads(leads) {
      const container = document.getElementById('affiliateLeads');
      if (leads.length === 0) {
        container.innerHTML = '<p class="text-zinc-400">Nu există leaduri afiliați.</p>';
        return;
      }
      container.innerHTML = leads.map(lead => `
        <div class="border-gold rounded-lg p-4">
          <p class="font-semibold">${lead.name}</p>
          <p class="text-sm text-zinc-400">${lead.email}</p>
          <p class="text-sm text-zinc-300 mt-2">Website: ${lead.website || 'N/A'}</p>
        </div>
      `).join('');
    }

    // Tab switching
    document.querySelectorAll('.tab-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        const tab = this.getAttribute('data-tab');
        document.querySelectorAll('.tab-btn').forEach(b => {
          b.classList.remove('active', 'text-gold4', 'border-b-2', 'border-gold4');
          b.classList.add('text-zinc-400');
        });
        this.classList.add('active', 'text-gold4', 'border-b-2', 'border-gold4');
        this.classList.remove('text-zinc-400');
        
        document.querySelectorAll('.tab-content').forEach(content => {
          content.classList.add('hidden');
        });
        document.getElementById('tab-' + tab).classList.remove('hidden');
      });
    });

    // Search clients
    document.getElementById('searchClients')?.addEventListener('input', function(e) {
      const search = e.target.value.toLowerCase();
      // Filter clients logic
    });

    // Load investor and affiliate leads from forms
    function loadLeadsFromStorage() {
      // Check for investor form submissions
      const investorFormData = localStorage.getItem('investorFormData');
      if (investorFormData) {
        const leads = JSON.parse(localStorage.getItem('investorLeads') || '[]');
        const data = JSON.parse(investorFormData);
        if (!leads.find(l => l.email === data.email)) {
          leads.push(data);
          localStorage.setItem('investorLeads', JSON.stringify(leads));
        }
      }
      
      // Check for affiliate form submissions
      const affiliateFormData = localStorage.getItem('affiliateFormData');
      if (affiliateFormData) {
        const leads = JSON.parse(localStorage.getItem('affiliateLeads') || '[]');
        const data = JSON.parse(affiliateFormData);
        if (!leads.find(l => l.email === data.email)) {
          leads.push(data);
          localStorage.setItem('affiliateLeads', JSON.stringify(leads));
        }
      }
    }

    // Initialize
    loadLeadsFromStorage();
    loadAdminData();
  </script>
</body>
</html>


