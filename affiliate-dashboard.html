<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Dashboard Afiliat – GetASubscription</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>tailwind.config={theme:{extend:{colors:{gold1:'#a67c00',gold2:'#bf9b30',gold3:'#ffbf00',gold4:'#ffcf40',gold5:'#ffdc73'},boxShadow:{'gold-glow':'0 0 20px rgba(191,155,48,0.45), inset 0 0 12px rgba(255,207,64,0.35)'},backgroundImage:{'gold-gradient':'linear-gradient(135deg,#a67c00 0%,#bf9b30 25%,#ffbf00 50%,#ffcf40 75%,#ffdc73 100%)'}}}}</script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
    body{background:#000;color:#e7e7e7;font-family:'Montserrat','Poppins',system-ui}
    .btn-gold{background-image:linear-gradient(135deg,#a67c00,#bf9b30 25%,#ffbf00 50%,#ffcf40 75%,#ffdc73);color:#111;box-shadow:0 0 0 1px rgba(255,207,64,.35) inset,0 8px 24px rgba(255,191,0,.25);transition:transform .2s,box-shadow .2s}
    .btn-gold:hover{transform:translateY(-2px);box-shadow:0 0 0 1px rgba(255,220,115,.55) inset,0 12px 32px rgba(255,207,64,.35)}
    .border-gold{border:1px solid rgba(191,155,48,.35);box-shadow:inset 0 0 12px rgba(191,155,48,.15),0 0 24px rgba(191,155,48,.12)}
    .text-gold-gradient{background:linear-gradient(135deg,#a67c00,#ffbf00,#ffdc73);-webkit-background-clip:text;background-clip:text;color:transparent}
  </style>
</head>
<body>
  <header class="fixed top-0 inset-x-0 z-50 backdrop-blur bg-black/40 border-b border-yellow-600/20">
    <div class="max-w-7xl mx-auto px-4 md:px-6 lg:px-8 h-16 flex items-center justify-between">
      <a href="index.html" class="flex items-center gap-3"><div class="w-8 h-8 rounded-full bg-gold-gradient"></div><span class="text-xl font-semibold tracking-widest bg-gold-gradient bg-clip-text text-transparent">GetASubscription</span></a>
      <nav class="hidden md:flex items-center gap-6 text-sm">
        <a href="index.html" class="hover:text-gold4 transition">Acasă</a>
        <a href="affiliate-dashboard.html" class="hover:text-gold4 transition text-gold4">Dashboard Afiliat</a>
      </nav>
    </div>
  </header>

  <main class="pt-24 pb-20">
    <div class="max-w-7xl mx-auto px-4 md:px-6 lg:px-8">
      <div class="mb-8">
        <h1 class="text-4xl md:text-5xl font-bold text-gold-gradient mb-2">Dashboard Afiliat</h1>
        <p class="text-zinc-300">Monitorizează-ți performanța, link-urile de tracking și comisioanele</p>
      </div>

      <!-- Stats Cards -->
      <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
        <div class="border-gold rounded-xl p-6">
          <div class="flex items-center justify-between mb-2">
            <span class="text-zinc-400 text-sm">Total clicks</span>
            <i class="fa-solid fa-mouse-pointer text-gold4 text-xl"></i>
          </div>
          <div class="text-3xl font-bold text-gold4" id="totalClicks">0</div>
        </div>
        <div class="border-gold rounded-xl p-6">
          <div class="flex items-center justify-between mb-2">
            <span class="text-zinc-400 text-sm">Conversii</span>
            <i class="fa-solid fa-check-circle text-gold4 text-xl"></i>
          </div>
          <div class="text-3xl font-bold text-gold4" id="totalConversions">0</div>
        </div>
        <div class="border-gold rounded-xl p-6">
          <div class="flex items-center justify-between mb-2">
            <span class="text-zinc-400 text-sm">Comisioane totale</span>
            <i class="fa-solid fa-dollar-sign text-gold4 text-xl"></i>
          </div>
          <div class="text-3xl font-bold text-gold4" id="totalCommissions">$0</div>
        </div>
        <div class="border-gold rounded-xl p-6">
          <div class="flex items-center justify-between mb-2">
            <span class="text-zinc-400 text-sm">Comisioane disponibile</span>
            <i class="fa-solid fa-wallet text-gold4 text-xl"></i>
          </div>
          <div class="text-3xl font-bold text-gold4" id="availableCommissions">$0</div>
        </div>
      </div>

      <!-- Link-uri de tracking -->
      <div class="border-gold rounded-xl p-6 mb-6">
        <h2 class="text-2xl font-semibold mb-4">Link-uri de tracking</h2>
        <p class="text-zinc-300 mb-4">Folosește aceste link-uri pentru a promova produsele și a urmări conversiile</p>
        <div class="space-y-4">
          <div class="border-gold rounded-lg p-4">
            <div class="flex items-center justify-between mb-2">
              <span class="font-semibold">Link general</span>
              <button class="copy-link btn-gold px-4 py-2 rounded-md text-sm font-semibold" data-link="https://getasubscription.com/?ref=affiliate123">Copiază</button>
            </div>
            <input type="text" readonly value="https://getasubscription.com/?ref=affiliate123" class="w-full border-gold bg-black/60 rounded-md px-4 py-2 text-sm text-zinc-300">
          </div>
          <div class="border-gold rounded-lg p-4">
            <div class="flex items-center justify-between mb-2">
              <span class="font-semibold">Link B2C</span>
              <button class="copy-link btn-gold px-4 py-2 rounded-md text-sm font-semibold" data-link="https://getasubscription.com/b2c.html?ref=affiliate123">Copiază</button>
            </div>
            <input type="text" readonly value="https://getasubscription.com/b2c.html?ref=affiliate123" class="w-full border-gold bg-black/60 rounded-md px-4 py-2 text-sm text-zinc-300">
          </div>
          <div class="border-gold rounded-lg p-4">
            <div class="flex items-center justify-between mb-2">
              <span class="font-semibold">Link B2B</span>
              <button class="copy-link btn-gold px-4 py-2 rounded-md text-sm font-semibold" data-link="https://getasubscription.com/b2b.html?ref=affiliate123">Copiază</button>
            </div>
            <input type="text" readonly value="https://getasubscription.com/b2b.html?ref=affiliate123" class="w-full border-gold bg-black/60 rounded-md px-4 py-2 text-sm text-zinc-300">
          </div>
        </div>
      </div>

      <!-- Statistici detaliate -->
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
        <div class="border-gold rounded-xl p-6">
          <h3 class="text-xl font-semibold mb-4">Conversii pe lună</h3>
          <div id="conversionsChart" class="h-64 flex items-end justify-between gap-2">
            <!-- Chart bars will be generated here -->
          </div>
        </div>
        <div class="border-gold rounded-xl p-6">
          <h3 class="text-xl font-semibold mb-4">Top produse promovate</h3>
          <div id="topProducts" class="space-y-3">
            <!-- Top products list -->
          </div>
        </div>
      </div>

      <!-- Istoric comisioane -->
      <div class="border-gold rounded-xl p-6">
        <h2 class="text-2xl font-semibold mb-4">Istoric comisioane</h2>
        <div id="commissionsHistory" class="space-y-4">
          <!-- Commission history -->
        </div>
        <div id="noCommissions" class="text-center py-12 text-zinc-400 hidden">
          <i class="fa-solid fa-chart-line text-4xl mb-4"></i>
          <p>Nu ai comisioane încă.</p>
        </div>
      </div>
    </div>
  </main>

  <script>
    // Load affiliate data
    function loadAffiliateData() {
      const affiliateData = JSON.parse(localStorage.getItem('affiliateData') || '{"clicks":0,"conversions":0,"commissions":0,"available":0,"history":[],"products":[]}');
      
      document.getElementById('totalClicks').textContent = affiliateData.clicks || 0;
      document.getElementById('totalConversions').textContent = affiliateData.conversions || 0;
      document.getElementById('totalCommissions').textContent = '$' + (affiliateData.commissions || 0).toFixed(2);
      document.getElementById('availableCommissions').textContent = '$' + (affiliateData.available || 0).toFixed(2);
      
      // Load history
      if (affiliateData.history && affiliateData.history.length > 0) {
        document.getElementById('commissionsHistory').innerHTML = affiliateData.history.map(comm => `
          <div class="border-gold rounded-lg p-4">
            <div class="flex items-center justify-between">
              <div>
                <p class="font-semibold">${comm.product}</p>
                <p class="text-sm text-zinc-400">${new Date(comm.date).toLocaleDateString('ro-RO')}</p>
              </div>
              <div class="text-right">
                <p class="text-lg font-bold text-gold4">$${comm.amount.toFixed(2)}</p>
                <p class="text-xs text-zinc-400">${comm.status}</p>
              </div>
            </div>
          </div>
        `).join('');
        document.getElementById('noCommissions').classList.add('hidden');
      } else {
        document.getElementById('commissionsHistory').innerHTML = '';
        document.getElementById('noCommissions').classList.remove('hidden');
      }
      
      // Load top products
      if (affiliateData.products && affiliateData.products.length > 0) {
        document.getElementById('topProducts').innerHTML = affiliateData.products.slice(0, 5).map((p, i) => `
          <div class="flex items-center justify-between">
            <div class="flex items-center gap-3">
              <span class="text-gold4 font-bold">#${i + 1}</span>
              <span>${p.name}</span>
            </div>
            <span class="text-gold4 font-semibold">${p.conversions} conversii</span>
          </div>
        `).join('');
      }
    }

    // Copy link functionality
    document.querySelectorAll('.copy-link').forEach(btn => {
      btn.addEventListener('click', function() {
        const link = this.getAttribute('data-link');
        navigator.clipboard.writeText(link).then(() => {
          this.textContent = 'Copiat!';
          setTimeout(() => {
            this.textContent = 'Copiază';
          }, 2000);
        });
      });
    });

    // Check for affiliate ID in URL and track
    const urlParams = new URLSearchParams(window.location.search);
    const ref = urlParams.get('ref');
    if (ref && ref.startsWith('affiliate')) {
      // Track click
      const affiliateData = JSON.parse(localStorage.getItem('affiliateData') || '{"clicks":0,"conversions":0,"commissions":0,"available":0,"history":[],"products":[]}');
      affiliateData.clicks = (affiliateData.clicks || 0) + 1;
      localStorage.setItem('affiliateData', JSON.stringify(affiliateData));
      localStorage.setItem('currentAffiliateRef', ref);
    }

    // Initialize
    loadAffiliateData();
  </script>
</body>
</html>



